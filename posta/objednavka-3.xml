<?xml version="1.0" encoding="UTF-8"?>
<document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://modeler.netgrif.com/petriflow_schema.xsd">
	<id>0601</id>
	<title>Meno</title>
	<!-- TRANSACTIONS -->
	<!-- ROLES -->
	<role>
		<id>client</id>
		<title>Zakaznik</title>
	</role>
	<role>
		<id>firma</id>
		<title>Firma</title>
	</role>
	<!-- DATA -->
	<data type="text">
		<id>meno</id>
		<title>Meno</title>
	</data>
	<data type="text">
		<id>priezvisko</id>
		<title>Priezvisko</title>
	</data>
	<data type="text">
		<id>email</id>
		<title>E-mail</title>
		<placeholder>yourmail@gmail.com</placeholder>
		<valid>email</valid>
	</data>
	<data type="text">
		<id>address</id>
		<title>Adresa</title>
	</data>
	<data type="enumeration">
		<id>tovar</id>
		<title>Tovar</title>
		<values>Stolicka</values>
		<values>Stol</values>
	</data>
	<data type="enumeration">
		<id>model</id>
		<title>Model</title>
		<values>A300</values>
		<values>Z510</values>
		<values>S6</values>
	</data>
	<data type="number">
		<id>pocet</id>
		<title>Pocet</title>
	</data>

	<data type="text">
		<id>textarea</id>
		<title>Objednavka</title>
		<values>area</values>
	</data>
	<data type="multichoice">
		<id>objednavka</id>
		<title>Multichoice</title>
	</data>
	<!-- TRANSITIONS -->
	<transition>
		<id>2</id>
		<x>260</x>
		<y>100</y>
		<label>pridanie tovaru [zakaznik]</label>
		<roleRef>
			<id>client</id>
			<logic>
				<perform>true</perform>
			</logic>
		</roleRef>
		<dataRef>
			<id>tovar</id>
			<logic>
				<behavior>editable</behavior>
				<behavior>required</behavior>
			</logic>
		</dataRef>
		<dataRef>
			<id>model</id>
			<logic>
				<behavior>editable</behavior>
				<behavior>required</behavior>
			</logic>
		</dataRef>
		<dataRef>
			<id>pocet</id>
			<logic>
				<behavior>editable</behavior>
				<behavior>required</behavior>
			</logic>
		</dataRef>
		<event type="finish">
			<id>create_order</id>
			<actions phase="post">
				<action trigger="set">
					tovar: f.tovar,
					model: f.model,
					pocet: f.pocet,
					textarea: f.textarea;

					change textarea value {
						if (textarea.value)
							return textarea.value + "${tovar.value} ${model.value} ${pocet.value}\n"
						else
							return "" + "${tovar.value} ${model.value} ${pocet.value}\n"
					}

				</action>
			</actions>
		</event>
	</transition>
	<transition>
		<id>3</id>
		<x>580</x>
		<y>220</y>
		<label>odoslanie do firmy [zakaznik]</label>
		<roleRef>
			<id>client</id>
			<logic>
				<perform>true</perform>
			</logic>
		</roleRef>
		<dataGroup>
			<id>cred</id>

		<dataRef>
			<id>meno</id>
			<logic>
				<behavior>editable</behavior>
				<behavior>required</behavior>
			</logic>
		</dataRef>
		<dataRef>
			<id>priezvisko</id>
			<logic>
				<behavior>editable</behavior>
				<behavior>required</behavior>
			</logic>
		</dataRef>
		<dataRef>
			<id>email</id>
			<logic>
				<behavior>editable</behavior>
				<behavior>required</behavior>
			</logic>
		</dataRef>
		<dataRef>
			<id>address</id>
			<logic>
				<behavior>editable</behavior>
				<behavior>required</behavior>
			</logic>
		</dataRef>
		<dataRef>
			<id>textarea</id>
			<logic>
				<behavior>visible</behavior>
			</logic>
		</dataRef>
		</dataGroup>
	</transition>
	<transition>
		<id>5</id>
		<x>260</x>
		<y>500</y>
		<label>zamietnutie objednavky [firma]</label>
		<roleRef>
			<id>firma</id>
			<logic>
				<perform>true</perform>
			</logic>
		</roleRef>
	</transition>
	<transition>
		<id>6</id>
		<x>580</x>
		<y>380</y>
		<label>kontrola objednavky [firma]</label>
		<roleRef>
			<id>firma</id>
			<logic>
				<perform>true</perform>
			</logic>
		</roleRef>
		<dataRef>
			<id>meno</id>
			<logic>
				<behavior>visible</behavior>
			</logic>
		</dataRef>
		<dataRef>
			<id>priezvisko</id>
			<logic>
				<behavior>visible</behavior>
			</logic>
		</dataRef>
		<dataRef>
			<id>email</id>
			<logic>
				<behavior>visible</behavior>
			</logic>
		</dataRef>
		<dataRef>
			<id>address</id>
			<logic>
				<behavior>visible</behavior>
			</logic>
		</dataRef>
		<dataRef>
			<id>textarea</id>
			<logic>
				<behavior>visible</behavior>
			</logic>
		</dataRef>
	</transition>
	<transition>
		<id>7</id>
		<x>700</x>
		<y>500</y>
		<label>schvalenie objednavky [firma]</label>
		<roleRef>
			<id>firma</id>
			<logic>
				<perform>true</perform>
			</logic>
		</roleRef>
		<event type="finish">
			<id>send_order</id>
			<actions phase="post">
				<action trigger="set">
					textarea: f.textarea,
					meno: f.meno,
					priezvisko: f.priezvisko,
					address: f.address,
					email: f.email;

					def ponuka = createCase("CEN", "Cenova ponuka")
					def initTask = assignTask("36", ponuka)


					setData(initTask, [
					"meno": [ "value": meno.value, "type": "text" ],
					"priezvisko": [ "value": priezvisko.value , "type": "text" ],
					"email": [ "value": email.value, "type":"text"],
					"address": [ "value": address.value, "type":"text"],
					"textarea": [ "value": textarea.value, "type":"text"]
					])
					finishTask("36",ponuka)
				</action>
			</actions>
		</event>
	</transition>
	<transition>
		<id>33</id>
		<x>415</x>
		<y>164</y>
		<label>odobranie tovaru [zakaznik]</label>
		<roleRef>
			<id>client</id>
			<logic>
				<perform>true</perform>
			</logic>
		</roleRef>
		<dataRef>
			<id>textarea</id>
			<logic>
				<behavior>visible</behavior>
			</logic>
		</dataRef>
		<dataRef>
			<id>objednavka</id>
			<logic>
				<behavior>visible</behavior>
				<behavior>editable</behavior>
			</logic>
		</dataRef>
		<event type="assign">
			<id>show_order</id>
			<actions phase="pre">
				<action trigger="set">
					textarea: f.textarea,
					moznosti: f.objednavka;

					change moznosti choices{
						return textarea.value
					}
					<!--change multichoice values {-->
					<!--textarea.value.split("\n")-->
					<!--}-->

				</action>
			</actions>
		</event>
	</transition>
	<!-- PLACES -->
	<place>
		<id>8</id>
		<x>260</x>
		<y>220</y>
		<label> </label>
		<tokens>1</tokens>
		<static>false</static>
	</place>
	<place>
		<id>9</id>
		<x>580</x>
		<y>300</y>
		<label> </label>
		<tokens>0</tokens>
		<static>false</static>
	</place>
	<place>
		<id>11</id>
		<x>580</x>
		<y>500</y>
		<label> </label>
		<tokens>0</tokens>
		<static>false</static>
	</place>
	<place>
		<id>12</id>
		<x>860</x>
		<y>500</y>
		<label> </label>
		<tokens>0</tokens>
		<static>false</static>
	</place>
	<place>
		<id>27</id>
		<x>580</x>
		<y>100</y>
		<label> </label>
		<tokens>0</tokens>
		<static>false</static>
	</place>
	<!-- ARCS -->
	<arc>
		<id>15</id>
		<type>regular</type>
		<sourceId>8</sourceId>
		<destinationId>3</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>17</id>
		<type>regular</type>
		<sourceId>3</sourceId>
		<destinationId>9</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>18</id>
		<type>regular</type>
		<sourceId>9</sourceId>
		<destinationId>6</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>20</id>
		<type>regular</type>
		<sourceId>6</sourceId>
		<destinationId>11</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>21</id>
		<type>regular</type>
		<sourceId>11</sourceId>
		<destinationId>7</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>22</id>
		<type>regular</type>
		<sourceId>7</sourceId>
		<destinationId>12</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>23</id>
		<type>regular</type>
		<sourceId>11</sourceId>
		<destinationId>5</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>28</id>
		<type>regular</type>
		<sourceId>2</sourceId>
		<destinationId>27</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>31</id>
		<type>regular</type>
		<sourceId>8</sourceId>
		<destinationId>2</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>32</id>
		<type>regular</type>
		<sourceId>2</sourceId>
		<destinationId>8</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>36</id>
		<type>regular</type>
		<sourceId>27</sourceId>
		<destinationId>33</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>37</id>
		<type>regular</type>
		<sourceId>33</sourceId>
		<destinationId>8</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>38</id>
		<type>regular</type>
		<sourceId>8</sourceId>
		<destinationId>33</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>41</id>
		<type>read</type>
		<sourceId>27</sourceId>
		<destinationId>3</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
	<arc>
		<id>42</id>
		<type>regular</type>
		<sourceId>5</sourceId>
		<destinationId>8</destinationId>
		<multiplicity>1</multiplicity>
	</arc>
</document>
